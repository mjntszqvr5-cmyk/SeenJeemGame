<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÙŠÙ† Ø¬ÙŠÙ… - Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„ÙƒØ¨ÙŠØ±</title>
    <style>
        :root { --gold: #f1c40f; --blue: #00d2ff; --dark: #0f0c29; --glass: rgba(255, 255, 255, 0.1); }
        body { background: linear-gradient(135deg, #24243e, #0f0c29); color: white; font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; min-height: 100vh; display: flex; flex-direction: column; align-items: center; }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header { width: 100%; padding: 15px; display: flex; justify-content: space-around; background: rgba(0,0,0,0.3); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 100; border-bottom: 2px solid var(--gold); }
        .timer-box { font-size: 2.5rem; color: var(--gold); font-weight: bold; min-width: 100px; text-align: center; visibility: hidden; }
        .team-box { text-align: center; padding: 10px 20px; border-radius: 15px; background: var(--glass); min-width: 150px; border: 1px solid rgba(255,255,255,0.1); }
        .t1-border { border-bottom: 5px solid var(--blue); }
        .t2-border { border-bottom: 5px solid #ff4757; }

        /* Ø§Ù„Ø´Ø§Ø´Ø§Øª */
        .screen { display: none; width: 90%; max-width: 1000px; padding: 20px; text-align: center; animation: fadeIn 0.5s; }
        .active { display: block; }

        /* Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª */
        input[type="text"] { padding: 12px; border-radius: 10px; border: none; width: 80%; max-width: 300px; margin: 10px; font-size: 1rem; }
        
        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ù„Ø¹Ø¨Ø© */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; margin-top: 20px; }
        .category-card { background: var(--glass); border: 1px solid var(--gold); padding: 20px; border-radius: 15px; cursor: pointer; transition: 0.3s; }
        .category-card.selected { border-color: var(--blue); background: rgba(0, 210, 255, 0.2); }
        
        .question-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 10px; margin-top: 20px; }
        .q-cell { background: var(--glass); border: 1px solid white; padding: 15px 5px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .q-cell.used { opacity: 0.3; cursor: not-allowed; background: #444; }

        .btn-large { padding: 15px 40px; font-size: 1.2rem; border-radius: 50px; border: none; cursor: pointer; margin: 10px; transition: 0.3s; font-weight: bold; }
        .btn-next { background: var(--blue); color: white; }
        .btn-correct { background: #2ecc71; color: white; }

        #timeout-msg { color: #ff4757; font-size: 1.5rem; font-weight: bold; display: none; margin: 20px 0; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div class="header">
        <div class="team-box t1-border">
            <div id="display-name-1">Ø§Ù„ÙØ±ÙŠÙ‚ 1</div>
            <div id="t1-score" style="font-size: 1.8rem; font-weight: bold; color: var(--blue);">0</div>
            <button class="power-btn" onclick="usePower(1, 'pit')" id="t1-pit">ğŸ•³ï¸ Ø§Ù„Ø­ÙØ±Ø©</button>
        </div>
        <div class="timer-box" id="timer-display">40</div>
        <div class="team-box t2-border">
            <div id="display-name-2">Ø§Ù„ÙØ±ÙŠÙ‚ 2</div>
            <div id="t2-score" style="font-size: 1.8rem; font-weight: bold; color: #ff4757;">0</div>
            <button class="power-btn" onclick="usePower(2, 'pit')" id="t2-pit">ğŸ•³ï¸ Ø§Ù„Ø­ÙØ±Ø©</button>
        </div>
    </div>

    <div id="name-screen" class="screen active">
        <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø³ÙŠÙ† Ø¬ÙŠÙ…</h1>
        <p>Ø£Ø¯Ø®Ù„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…ØªÙ†Ø§ÙØ³ÙŠÙ†:</p>
        <input type="text" id="name1" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø£ÙˆÙ„">
        <input type="text" id="name2" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø«Ø§Ù†ÙŠ">
        <br>
        <button class="btn-large btn-next" onclick="saveNames()">Ù…ØªØ§Ø¨Ø¹Ø©</button>
    </div>

    <div id="setup-screen" class="screen">
        <h1 id="selection-title">Ø§Ù„Ù„Ø§Ø¹Ø¨ 1: Ø§Ø®ØªØ± 3 ÙØ¦Ø§Øª</h1>
        <div class="grid" id="categories-grid"></div>
        <button id="start-btn" class="btn-large btn-next" style="display: none;" onclick="startGame()">Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨</button>
    </div>

    <div id="board-screen" class="screen">
        <div class="question-grid" id="main-board"></div>
    </div>

    <div id="question-screen" class="screen">
        <div id="current-q-info" style="color: var(--gold); font-size: 1.2rem;"></div>
        <div id="timeout-msg">â³ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! ÙŠØ³Ù…Ø­ Ù„Ù„Ø·Ø±Ù Ø§Ù„Ø¢Ø®Ø± Ø¨Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</div>
        <div id="q-text" style="font-size: 2.5rem; margin: 40px 0;"></div>
        
        <button class="btn-large btn-next" id="show-ans-btn" onclick="showAnswer()">Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
        <div id="a-text" style="font-size: 2rem; color: #2ecc71; display: none; margin: 20px 0;"></div>
        
        <div id="scoring-btns" style="display: none;">
            <p>Ù…Ù† Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø§Ù„Ù†Ù‚Ø§Ø·ØŸ</p>
            <button class="btn-large btn-correct" id="score-btn-1" onclick="awardPoints(1)"></button>
            <button class="btn-large btn-correct" id="score-btn-2" onclick="awardPoints(2)"></button>
            <button class="btn-large" style="background:#555; color:white;" onclick="awardPoints(0)">Ù„Ø§ Ø£Ø­Ø¯</button>
        </div>
    </div>

    <script>
        const allCategories = [
            { name: "ØªØ§Ø±ÙŠØ®", questions: { 100:["Ù…Ù† Ù…Ø¤Ø³Ø³ Ø§Ù„ÙƒÙˆÙŠØªØŸ","ØµØ¨Ø§Ø­ Ø§Ù„Ø£ÙˆÙ„"], 200:["Ù…ØªÙ‰ ÙƒØ§Ù† Ø§Ù„Ø§Ø³ØªÙ‚Ù„Ø§Ù„ØŸ","1961"], 300:["Ù…ØªÙ‰ ØªÙ… Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø³ÙˆØ± Ø§Ù„Ø«Ø§Ù„Ø«ØŸ","1920"], 500:["ØªØ§Ø±ÙŠØ® Ù…Ø¹Ø±ÙƒØ© Ø§Ù„Ø¬Ù‡Ø±Ø§Ø¡ØŸ","1920"] } },
            { name: "Ø¬ØºØ±Ø§ÙÙŠØ§", questions: { 100:["Ø¹Ø§ØµÙ…Ø© Ø¹Ù…Ø§Ù†ØŸ","Ù…Ø³Ù‚Ø·"], 200:["Ø£ÙƒØ¨Ø± Ù…Ø­ÙŠØ·ØŸ","Ø§Ù„Ù‡Ø§Ø¯ÙŠ"], 300:["Ø£Ø¹Ù„Ù‰ Ù‚Ù…Ø© Ø¬Ø¨Ù„ØŸ","Ø¥ÙŠÙØ±ÙŠØ³Øª"], 500:["Ø£Ø¹Ù…Ù‚ Ù†Ù‚Ø·Ø© ÙÙŠ Ø§Ù„Ø¨Ø­Ø§Ø±ØŸ","Ø®Ù†Ø¯Ù‚ Ù…Ø§Ø±ÙŠØ§Ù†Ø§"] } },
            { name: "Ø±ÙŠØ§Ø¶Ø©", questions: { 100:["Ù„Ø§Ø¹Ø¨ ÙŠÙ„Ù‚Ø¨ Ø¨Ø§Ù„Ø¨Ø±ØºÙˆØ«ØŸ","Ù…ÙŠØ³ÙŠ"], 200:["Ø¨Ø·Ù„ ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù… 2018ØŸ","ÙØ±Ù†Ø³Ø§"], 300:["Ø¹Ø¯Ø¯ Ø¨Ø·ÙˆÙ„Ø§Øª Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯ ÙÙŠ Ø§Ù„Ø£Ø¨Ø·Ø§Ù„ØŸ","15"], 500:["Ø£ÙˆÙ„ ÙØ±ÙŠÙ‚ Ø¹Ø±Ø¨ÙŠ ÙØ§Ø² Ø¨Ù…Ø¨Ø§Ø±Ø§Ø© ÙÙŠ Ø§Ù„Ù…ÙˆÙ†Ø¯ÙŠØ§Ù„ØŸ","ØªÙˆÙ†Ø³"] } },
            { name: "Ø£Ù…Ø«Ø§Ù„", questions: { 100:["Ø§Ù„Ù„ÙŠ Ù…Ø§ ÙŠØ¹Ø±Ù Ø§Ù„ØµÙ‚Ø±..","ÙŠØ´ÙˆÙŠÙ‡"], 200:["Ø·Ù‚ Ø¹ØµÙŠ..","ÙŠØµÙŠØ± Ø¯Ù…"], 300:["Ø§Ù„Ø¬Ø§Ø± Ù‚Ø¨Ù„..","Ø§Ù„Ø¯Ø§Ø±"], 500:["ÙƒØ£Ù†Ùƒ ÙŠØ§ Ø¨Ùˆ Ø²ÙŠØ¯..","Ù…Ø§ ØºØ²ÙŠØª"] } },
            { name: "ÙØ¶Ø§Ø¡", questions: { 100:["Ø£Ù‚Ø±Ø¨ ÙƒÙˆÙƒØ¨ Ù„Ù„Ø´Ù…Ø³ØŸ","Ø¹Ø·Ø§Ø±Ø¯"], 200:["Ø§Ù„ÙƒÙˆÙƒØ¨ Ø§Ù„Ø£Ø­Ù…Ø±ØŸ","Ø§Ù„Ù…Ø±ÙŠØ®"], 300:["Ø£ÙƒØ¨Ø± ÙƒÙˆØ§ÙƒØ¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©ØŸ","Ø§Ù„Ù…Ø´ØªØ±ÙŠ"], 500:["Ø£ÙˆÙ„ Ø±Ø§Ø¦Ø¯ ÙØ¶Ø§Ø¡ Ø¹Ø±Ø¨ÙŠØŸ","Ø³Ù„Ø·Ø§Ù† Ø¨Ù† Ø³Ù„Ù…Ø§Ù†"] } },
            { name: "Ø§Ø®ØªØ±Ø§Ø¹Ø§Øª", questions: { 100:["Ù…Ø®ØªØ±Ø¹ Ø§Ù„Ù…ØµØ¨Ø§Ø­ØŸ","Ø¥Ø¯ÙŠØ³ÙˆÙ†"], 200:["Ù…Ø®ØªØ±Ø¹ Ø§Ù„Ù‡Ø§ØªÙØŸ","ØºØ±Ø§Ù‡Ø§Ù… Ø¨ÙŠÙ„"], 300:["Ù…Ø®ØªØ±Ø¹ Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ©ØŸ","Ù†ÙŠÙˆØªÙ†"], 500:["Ù…Ø®ØªØ±Ø¹ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠØªØŸ","Ù†ÙˆØ¨Ù„"] } }
        ];

        let p1Name = "", p2Name = "";
        let selectedCats = [];
        let scores = { 1: 0, 2: 0 };
        let timerInterval;
        let timeLeft = 40;
        let currentQ = null;
        let pitActive = false;

        function saveNames() {
            p1Name = document.getElementById('name1').value || "Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø£ÙˆÙ„";
            p2Name = document.getElementById('name2').value || "Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø«Ø§Ù†ÙŠ";
            document.getElementById('display-name-1').innerText = p1Name;
            document.getElementById('display-name-2').innerText = p2Name;
            document.getElementById('score-btn-1').innerText = p1Name;
            document.getElementById('score-btn-2').innerText = p2Name;
            
            showScreen('setup-screen');
            initSetup();
        }

        function initSetup() {
            const grid = document.getElementById('categories-grid');
            allCategories.forEach((cat, index) => {
                const card = document.createElement('div');
                card.className = 'category-card';
                card.innerText = cat.name;
                card.onclick = () => {
                    if (selectedCats.includes(cat) || selectedCats.length >= 6) return;
                    selectedCats.push(cat);
                    card.classList.add('selected');
                    if(selectedCats.length === 3) document.getElementById('selection-title').innerText = `${p2Name}: Ø§Ø®ØªØ± 3 ÙØ¦Ø§Øª`;
                    if(selectedCats.length === 6) {
                        document.getElementById('selection-title').innerText = "ØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±!";
                        document.getElementById('start-btn').style.display = 'inline-block';
                    }
                };
                grid.appendChild(card);
            });
        }

        function startGame() { showScreen('board-screen'); renderBoard(); }

        function renderBoard() {
            const board = document.getElementById('main-board');
            board.innerHTML = '';
            selectedCats.forEach(cat => {
                const h = document.createElement('div'); h.innerText = cat.name; h.style.color = 'var(--gold)'; board.appendChild(h);
            });
            [100, 100, 200, 200, 300, 300, 500, 500].forEach(p => {
                selectedCats.forEach(cat => {
                    const cell = document.createElement('div'); cell.className = 'q-cell'; cell.innerText = p;
                    cell.onclick = () => openQuestion(cat, p, cell);
                    board.appendChild(cell);
                });
            });
        }

        function openQuestion(cat, p, cell) {
            if (cell.classList.contains('used')) return;
            cell.classList.add('used');
            currentQ = { points: p, a: cat.questions[p][1] };
            
            document.getElementById('q-text').innerText = cat.questions[p][0];
            document.getElementById('current-q-info').innerText = `${cat.name} - ${p} Ù†Ù‚Ø·Ø©`;
            document.getElementById('timeout-msg').style.display = 'none';
            document.getElementById('a-text').style.display = 'none';
            document.getElementById('scoring-btns').style.display = 'none';
            document.getElementById('show-ans-btn').style.display = 'inline-block';
            
            showScreen('question-screen');
            startTimer();
        }

        function startTimer() {
            timeLeft = 40;
            const display = document.getElementById('timer-display');
            display.style.visibility = 'visible';
            display.innerText = timeLeft;
            display.style.color = 'var(--gold)';

            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                display.innerText = timeLeft;
                if (timeLeft <= 10) display.style.color = 'red';
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    document.getElementById('timeout-msg').style.display = 'block';
                }
            }, 1000);
        }

        function showAnswer() {
            clearInterval(timerInterval);
            document.getElementById('timer-display').style.visibility = 'hidden';
            document.getElementById('a-text').innerText = "Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©: " + currentQ.a;
            document.getElementById('a-text').style.display = 'block';
            document.getElementById('scoring-btns').style.display = 'block';
            document.getElementById('show-ans-btn').style.display = 'none';
        }

        function awardPoints(team) {
            if (team !== 0) {
                if (pitActive) {
                    scores[team === 1 ? 2 : 1] -= currentQ.points;
                    pitActive = false;
                }
                scores[team] += currentQ.points;
                document.getElementById(`t${team}-score`).innerText = scores[team];
                document.getElementById(`t${team === 1 ? 2 : 1}-score`).innerText = scores[team === 1 ? 2 : 1];
            }
            showScreen('board-screen');
        }

        function usePower(team, type) {
            pitActive = true;
            alert(`${team === 1 ? p1Name : p2Name} Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­ÙØ±Ø©!`);
            document.getElementById(`t${team}-${type}`).disabled = true;
        }

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }
    </script>
</body>
</html>
