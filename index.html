<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÙŠÙ† Ø¬ÙŠÙ… | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</title>
    <style>
        :root { --main-bg: #1e1e1e; --header-bg: #121212; --card-bg: #2d2d2d; --orange: #ff7644; --gold: #f1c40f; }
        body { background-color: var(--main-bg); color: white; font-family: sans-serif; margin: 0; padding: 0; overflow-x: hidden; }

        /* Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .app-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background: var(--header-bg); border-bottom: 2px solid var(--orange); position: fixed; top: 0; width: 100%; z-index: 3000; box-sizing: border-box; }
        .profile-area { display: flex; align-items: center; gap: 10px; }
        .profile-avatar { background: var(--orange); width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; }

        .screen { display: none; padding: 80px 15px 120px; text-align: center; min-height: 100vh; box-sizing: border-box; }
        .active { display: block !important; }

        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø·ÙˆØ±Ø© */
        .game-grid { display: grid; grid-template-columns: 1fr; gap: 20px; max-width: 600px; margin: auto; }
        .category-row { display: flex; align-items: center; justify-content: center; gap: 10px; background: #222; padding: 10px; border-radius: 15px; }
        .points-box { background: var(--card-bg); padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold; width: 60px; transition: 0.3s; }
        .points-box:hover { background: var(--orange); }
        .cat-thumb { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 2px solid var(--gold); }
        .cat-name-mini { font-size: 0.7rem; color: var(--gold); margin-top: 5px; }

        /* Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙˆÙ‚Øª */
        #timer-box { font-size: 2rem; color: var(--orange); font-weight: bold; margin: 10px 0; }
        .turn-msg { background: rgba(255,118,68,0.2); padding: 10px; border-radius: 10px; color: var(--orange); margin-bottom: 15px; font-weight: bold; }

        /* Ø²Ø± Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨ */
        .footer-action { position: fixed; bottom: 0; width: 100%; background: var(--header-bg); padding: 20px; border-top: 1px solid #333; z-index: 2500; display: none; text-align: center; }
        .btn-play { background: var(--orange); color: white; border: none; padding: 15px; border-radius: 30px; width: 90%; max-width: 400px; font-size: 1.2rem; font-weight: bold; cursor: pointer; }
        
        .grid-cats { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .cat-item { background: var(--card-bg); border-radius: 15px; overflow: hidden; border: 3px solid transparent; cursor: pointer; }
        .cat-item img { width: 100%; height: 100px; object-fit: cover; }
        .cat-item.selected { border-color: var(--gold); }
    </style>
</head>
<body>

    <header class="app-header">
        <div style="font-size: 1.5rem;">â˜°</div>
        <div class="profile-area">
            <span id="header-player-name">Ù„Ø§Ø¹Ø¨ 1</span>
            <div class="profile-avatar">ğŸ‘¤</div>
        </div>
    </header>

    <div id="name-screen" class="screen active">
        <h2 style="color:var(--gold)">Ø£Ø¯Ø®Ù„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…ØªÙ†Ø§ÙØ³ÙŠÙ†</h2>
        <input type="text" id="p1-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„" style="padding:12px; margin:10px; width:80%; border-radius:8px;"><br>
        <input type="text" id="p2-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ" style="padding:12px; margin:10px; width:80%; border-radius:8px;"><br>
        <button onclick="saveNames()" style="background:var(--orange); border:none; color:white; padding:15px 40px; border-radius:30px; margin-top:20px;">Ù…ØªØ§Ø¨Ø¹Ø©</button>
    </div>

    <div id="setup-screen" class="screen">
        <div class="turn-msg" id="selection-msg">Ø§Ù„Ù„Ø§Ø¹Ø¨ 1: Ø§Ø®ØªØ± 3 ÙØ¦Ø§Øª</div>
        <div class="grid-cats" id="cats-container"></div>
        <div class="footer-action" id="footer-btn-area">
            <button class="btn-play" onclick="startTheGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø¢Ù†</button>
        </div>
    </div>

    <div id="board-screen" class="screen">
        <div class="game-grid" id="main-board"></div>
    </div>

    <div id="q-screen" class="screen">
        <div id="timer-box">40</div>
        <h2 id="q-text" style="line-height:1.6;"></h2>
        <div id="turn-alert" style="color:var(--gold); display:none; margin:15px; font-weight:bold;"></div>
        <button onclick="revealAns()" style="background:var(--orange); border:none; color:white; padding:12px 30px; border-radius:10px; margin-top:20px;">Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
        <h3 id="a-text" style="display:none; color:#2ecc71; margin-top:20px;"></h3>
        <br><br>
        <button onclick="closeQ()" style="background:#555; color:white; border:none; padding:10px 20px; border-radius:8px;">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ­Ø©</button>
    </div>

    <script>
        let p1 = "Ù„Ø§Ø¹Ø¨ 1", p2 = "Ù„Ø§Ø¹Ø¨ 2";
        let selectedIDs = [];
        let timer;
        const categories = [
            { id: 1, name: "Ø¥Ø³Ù„Ø§Ù…ÙŠØ§Øª", img: "https://images.unsplash.com/photo-1584281723351-9d901645ed71?w=200", q: {100:"Ø£ÙˆÙ„ Ù…Ø¤Ø°Ù† ÙÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ", 200:"Ø¹Ø¯Ø¯ Ø³ÙˆØ± Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ"}, a: {100:"Ø¨Ù„Ø§Ù„ Ø¨Ù† Ø±Ø¨Ø§Ø­", 200:"114 Ø³ÙˆØ±Ø©"} },
            { id: 2, name: "ØªØ§Ø±ÙŠØ®", img: "https://images.unsplash.com/photo-1461360228754-6e81c478585b?w=200", q: {100:"Ø³Ù†Ø© Ø§Ø³ØªÙ‚Ù„Ø§Ù„ Ø§Ù„ÙƒÙˆÙŠØªØŸ", 200:"Ø¨Ø§Ù†ÙŠ Ø§Ù„Ø£Ù‡Ø±Ø§Ù…Ø§ØªØŸ"}, a: {100:"1961", 200:"Ø§Ù„ÙØ±Ø§Ø¹Ù†Ø©"} },
            { id: 3, name: "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø©", img: "https://i.ibb.co/hRy3nCnZ/Untitled-design.png", q: {100:"Ø£ÙƒØ¨Ø± Ù…Ø­ÙŠØ·ØŸ", 200:"Ø¹Ø§ØµÙ…Ø© ÙØ±Ù†Ø³Ø§ØŸ"}, a: {100:"Ø§Ù„Ù‡Ø§Ø¯ÙŠ", 200:"Ø¨Ø§Ø±ÙŠØ³"} },
            { id: 4, name: "Ø±ÙŠØ§Ø¶Ø©", img: "https://images.unsplash.com/photo-1508098682722-e99c43a406b2?w=200", q: {100:"Ù…Ø¯Ø© Ù…Ø¨Ø§Ø±Ø§Ø© Ø§Ù„Ù‚Ø¯Ù…ØŸ", 200:"Ø¨Ø·Ù„ Ù…ÙˆÙ†Ø¯ÙŠØ§Ù„ 2022ØŸ"}, a: {100:"90 Ø¯Ù‚ÙŠÙ‚Ø©", 200:"Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†"} },
            { id: 5, name: "Ø¹Ù„ÙˆÙ…", img: "https://images.unsplash.com/photo-1532094349884-543bc11b234d?w=200", q: {100:"Ø£Ù‚Ø±Ø¨ ÙƒÙˆÙƒØ¨ Ù„Ù„Ø´Ù…Ø³ØŸ", 200:"Ù…Ø®ØªØ±Ø¹ Ø§Ù„Ù…ØµØ¨Ø§Ø­ØŸ"}, a: {100:"Ø¹Ø·Ø§Ø±Ø¯", 200:"Ø£Ø¯ÙŠØ³ÙˆÙ†"} },
            { id: 6, name: "Ø¬ØºØ±Ø§ÙÙŠØ§", img: "https://images.unsplash.com/photo-1521295121783-8a321d551ad2?w=200", q: {100:"Ø£Ø¹Ù„Ù‰ Ù‚Ù…Ø© Ø¬Ø¨Ù„ÙŠØ©ØŸ", 200:"Ø£ÙƒØ¨Ø± Ø¯ÙˆÙ„Ø© Ù…Ø³Ø§Ø­Ø©ØŸ"}, a: {100:"Ø¥ÙŠÙØ±Ø³Øª", 200:"Ø±ÙˆØ³ÙŠØ§"} }
        ];

        function saveNames() {
            p1 = document.getElementById('p1-input').value || "Ù„Ø§Ø¹Ø¨ 1";
            p2 = document.getElementById('p2-input').value || "Ù„Ø§Ø¹Ø¨ 2";
            document.getElementById('name-screen').classList.remove('active');
            document.getElementById('setup-screen').classList.add('active');
            renderSelection();
        }

        function renderSelection() {
            const container = document.getElementById('cats-container');
            container.innerHTML = '';
            const msg = document.getElementById('selection-msg');
            if(selectedIDs.length < 3) msg.innerText = `${p1}: Ø§Ø®ØªØ± ${3 - selectedIDs.length} ÙØ¦Ø§Øª`;
            else if(selectedIDs.length < 6) msg.innerText = `${p2}: Ø§Ø®ØªØ± ${6 - selectedIDs.length} ÙØ¦Ø§Øª`;
            else { msg.innerText = "Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±!"; document.getElementById('footer-btn-area').style.display = 'block'; }

            categories.forEach(cat => {
                const isSelected = selectedIDs.includes(cat.id);
                container.innerHTML += `<div class="cat-item ${isSelected ? 'selected' : ''}" onclick="selectCat(${cat.id})"><img src="${cat.img}"><div style="padding:5px;font-size:0.8rem;">${cat.name}</div></div>`;
            });
        }

        function selectCat(id) {
            const idx = selectedIDs.indexOf(id);
            if (idx > -1) selectedIDs.splice(idx, 1);
            else if (selectedIDs.length < 6) selectedIDs.push(id);
            renderSelection();
        }

        function startTheGame() {
            document.getElementById('setup-screen').classList.remove('active');
            document.getElementById('board-screen').classList.add('active');
            renderBoard();
        }

        function renderBoard() {
            const board = document.getElementById('main-board');
            const chosen = categories.filter(c => selectedIDs.includes(c.id));
            board.innerHTML = '';
            chosen.forEach(cat => {
                board.innerHTML += `
                    <div class="category-row">
                        <div class="points-box" onclick="ask(${cat.id}, 100)">100</div>
                        <div style="text-align:center">
                            <img src="${cat.img}" class="cat-thumb">
                            <div class="cat-name-mini">${cat.name}</div>
                        </div>
                        <div class="points-box" onclick="ask(${cat.id}, 200)">200</div>
                    </div>`;
            });
        }

        function ask(catId, pts) {
            const cat = categories.find(c => c.id === catId);
            document.getElementById('q-text').innerText = cat.q[pts];
            document.getElementById('a-text').innerText = "Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©: " + cat.a[pts];
            document.getElementById('a-text').style.display = 'none';
            document.getElementById('turn-alert').style.display = 'none';
            document.getElementById('board-screen').classList.remove('active');
            document.getElementById('q-screen').classList.add('active');
            startTimer();
        }

        function startTimer() {
            let timeLeft = 40;
            const display = document.getElementById('timer-box');
            display.innerText = timeLeft;
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                display.innerText = timeLeft;
                if(timeLeft <= 0) {
                    clearInterval(timer);
                    document.getElementById('turn-alert').innerText = `Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø¢Ù† Ù„Ù„Ù…Ù†Ø§ÙØ³ Ø§Ù„Ø«Ø§Ù†ÙŠ`;
                    document.getElementById('turn-alert').style.display = 'block';
                }
            }, 1000);
        }

        function revealAns() { clearInterval(timer); document.getElementById('a-text').style.display = 'block'; }
        function closeQ() { 
            clearInterval(timer);
            document.getElementById('q-screen').classList.remove('active');
            document.getElementById('board-screen').classList.add('active');
        }
    </script>
</body>
</html>
